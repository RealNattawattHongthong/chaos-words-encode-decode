# Core encoding and decoding functionality